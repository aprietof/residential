tinymce.PluginManager.add("octo_fontsizeselect",function(t,n){function e(n,e){return function(){var o=this;t.on("nodeChange",function(i){var a=t.formatter,l=null;if(tinymce.util.Tools.each(i.parents,function(t){return tinymce.util.Tools.each(n,function(n){return e?a.matchNode(t,e,{value:n.value})&&(l=n.value):a.matchNode(t,n.value)&&(l=n.value),l?!1:void 0}),l?!1:void 0}),!l){var c=t.selection.getNode();if(c){var u=jQuery(c).css("font-size");-1!=u.indexOf("px")&&(u=Math.round(72*parseInt(u)/96)),l=u+"pt"}}o.value(l)})}}t.addButton("octo_fontsizeselect",function(){var n=[],o="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=t.settings.fontsize_formats||o,a=!1;tinymce.util.Tools.each(i.split(" "),function(t){var e=t,o=t,i=t.split("=");i.length>1&&(e=i[0],o=i[1]),n.push({text:e,value:o})});var l=!1;return{type:"listbox",text:"12pt",tooltip:"Font Sizes",values:n,onPostRender:e(n,"fontsize"),onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)},onshow:function(n){var e=this,o=this._value?this._value:"12pt",i=n.control._parent._id,c=jQuery("#"+i+"-open"),u=c.find("span"),r={w:u.width(),h:u.height()};u.replaceWith('<input id="'+i+'input" class="mceFontSizeInp" placeholder="'+o+'"/>');var s=c.find("#"+i+"input");s.width(r.w),s.height(r.h),s.select(),s.change(function(){var o=s.val()+"pt";n.control.settings.value=o,e._text=o,e._value=o,t.execCommand("FontSize",!1,n.control.settings.value)}),s.on("input",function(){var t=parseInt(s.val().replace(/[^0-9]/g,""));t>0&&(s.val(t),n.control.settings.value=t,e._text=t,e._value=t)}),s.on("click",function(t){if(l=!1,a){jQuery(t.currentTarget).select();l=!0}}),c.on("click",function(t){a&&l&&t.stopPropagation(),l=!1}),a=!0},onhide:function(t){var n=t.control.settings.value?t.control.settings.value:"12pt",e=jQuery("#"+t.control._parent._id+"input"),o=jQuery("<span>"+n+"</span>");e.replaceWith(o),a=!1}}})});