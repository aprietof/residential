tinymce.PluginManager.add("octo_fontselect",function(e){e.addButton("octo_fontselect",function(){function a(a,n){return function(){var i=this;e.on("nodeChange",function(t){var o=e.formatter,s=null;tinymce.util.Tools.each(t.parents,function(e){return tinymce.util.Tools.each(a,function(a){return n?o.matchNode(e,n,{value:a.value})&&(s=a.value):o.matchNode(e,a.value)&&(s=a.value),s?!1:void 0}),s?!1:void 0}),i.value(s),i.text("Ab")})}}var n={"Andale Mono":"andale mono,monospace",Arial:"arial,helvetica,sans-serif","Arial Black":"arial black,sans-serif","Book Antiqua":"book antiqua,palatino,serif","Comic Sans MS":"comic sans ms,sans-serif","Courier New":"courier new,courier,monospace",Georgia:"georgia,palatino,serif",Helvetica:"helvetica,arial,sans-serif",Impact:"impact,sans-serif","Libre Baskerville":"Libre Baskerville, serif",Montserrat:"Montserrat","Playfair Display SC":"Playfair Display SC","PT Sans":"PT Sans",Raleway:"Raleway",Symbol:"symbol",Tahoma:"tahoma,arial,helvetica,sans-serif",Terminal:"terminal,monaco,monospace","Times New Roman":"times new roman,times,serif","Trebuchet MS":"trebuchet ms,geneva,sans-serif",Verdana:"verdana,geneva,sans-serif",Webdings:"webdings",Wingdings:"wingdings,zapf dingbats",Lato:'Lato, Raleway, "Helvetica Neue", Helvetica, Arial, sans-serif',Oswald:"oswald, sans-serif",Arimo:"arimo, sans-serif"},i=[];for(var t in n)i.push({text:t,value:n[t],textStyle:-1==t.indexOf("dings")?"font-family:"+n[t]+";":"",classes:"not-inline"});return{type:"listbox",text:"Ab",tooltip:"Font Family",values:i,onPostRender:a(i,"fontname"),onshow:function(e){if(!e.control._octChangedElements){e.control._octChangedElements=!0;var a=e.control.getEl("body"),n=100;jQuery(a).find(".mce-menu-item.mce-stack-layout-item").each(function(){var e=jQuery(this).find("span:first"),a=e.css("font-family"),n=e.text();e.css("font-family",""),e.html('<span class="mce-menu-item-left" style="font-family: '+a+';">'+n+'</span><div style="clear: both;"></div>'),e.addClass("mce-menu-item-block")}),jQuery(a).css({"max-height":"100px"}).slimScroll({height:n+"px",distance:"15px",size:"3px",borderRadius:"3px",railBorderRadius:"3px",color:"#fff",opacity:1,railColor:"#fff",railOpacity:.5,railVisible:!0,alwaysVisible:!0,allowPageScroll:!1}),e.control._octSlimScrollH=n+10}},onhide:function(){},onselect:function(a){a.control.text("Ab"),a.control.settings.value&&(e.theme.panel._octNewSubMenuMoved=!0,e.execCommand("FontName",!1,a.control.settings.value))}}})});