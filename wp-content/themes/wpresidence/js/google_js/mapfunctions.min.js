
var pin_images=mapfunctions_vars.pin_images;var images=jQuery.parseJSON(pin_images);var ipad_time=0;var infobox_id=0;var shape={coord:[1,1,1,38,38,59,59,1],type:"poly"};var mcOptions;var mcluster;var clusterStyles;var pin_hover_storage;var first_time_wpestate_show_inpage_ajax_half=0;var panorama;var infoBox_sh=null;function wpestate_map_featured_shortcode_function(){var m=parseInt(jQuery("#googleMap_shortcode").attr("data-post_id"),10);var q=jQuery("#googleMap_shortcode").attr("data-cur_lat");var x=jQuery("#googleMap_shortcode").attr("data-cur_long");var c;var F;var D=[];if(typeof googlecode_property_vars==="undefined"){c=5;heading=0}else{c=googlecode_property_vars.page_custom_zoom;heading=parseInt(googlecode_property_vars.camera_angle)}var o={flat:false,noClear:false,zoom:parseInt(c),scrollwheel:false,draggable:true,center:new google.maps.LatLng(q,x),streetViewControl:false,disableDefaultUI:true};F=new google.maps.Map(document.getElementById("googleMap_shortcode"),o);google.maps.visualRefresh=true;width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}var r=document.createElement("div");var v={content:r,disableAutoPan:true,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:true};infoBox_sh=new InfoBox(v);if(mapfunctions_vars.map_style!==""){var j=JSON.parse(mapfunctions_vars.map_style);F.setOptions({styles:j})}var w=m;var d=q;var H=x;var G=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-title"));var g=jQuery("#googleMap_shortcode").attr("data-pin");var k=1;var u=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-thumb"));var z=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-price"));var h=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var t=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var f="";var A="";var C="";var e="";var E=jQuery("#googleMap_shortcode").attr("data-rooms");var b=jQuery("#googleMap_shortcode").attr("data-bathrooms");var s=jQuery("#googleMap_shortcode").attr("data-size");var p=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var y=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var n="";var a="";var B=1;createMarker_sh(infoBox_sh,D,F,a,s,B,w,d,H,g,G,k,u,z,h,t,f,A,C,E,b,e,p,y);var l=new google.maps.LatLng(q,x);panorama=F.getStreetView();panorama.setPosition(l);panorama.setPov(({heading:heading,pitch:0}));jQuery("#slider_enable_street_sh").click(function(){cur_lat=jQuery("#googleMap_shortcode").attr("data-cur_lat");cur_long=jQuery("#googleMap_shortcode").attr("data-cur_long");myLatLng=new google.maps.LatLng(cur_lat,cur_long);panorama.setPosition(myLatLng);panorama.setVisible(true);jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").hide()});google.maps.event.addListener(panorama,"closeclick",function(){jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").show()});if(document.getElementById("gmapzoomplus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomplus_sh"),"click",function(){var i=parseInt(F.getZoom(),10);i++;if(i>20){i=20}F.setZoom(i)})}if(document.getElementById("gmapzoomminus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomminus_sh"),"click",function(){var i=parseInt(F.getZoom(),10);i--;if(i<0){i=0}F.setZoom(i)})}google.maps.event.trigger(D[0],"click");google.maps.event.trigger(F,"resize")}function wpestate_map_shortcode_function(){var m=parseInt(jQuery("#googleMap_shortcode").attr("data-post_id"),10);var q=jQuery("#googleMap_shortcode").attr("data-cur_lat");var x=jQuery("#googleMap_shortcode").attr("data-cur_long");var c;var F;var D=[];if(typeof googlecode_property_vars==="undefined"){c=5;heading=0}else{c=googlecode_property_vars.page_custom_zoom;heading=parseInt(googlecode_property_vars.camera_angle)}var o={flat:false,noClear:false,zoom:parseInt(c),scrollwheel:false,draggable:true,center:new google.maps.LatLng(q,x),streetViewControl:false,disableDefaultUI:true};F=new google.maps.Map(document.getElementById("googleMap_shortcode"),o);google.maps.visualRefresh=true;width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}var r=document.createElement("div");var v={content:r,disableAutoPan:true,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:true};infoBox_sh=new InfoBox(v);if(mapfunctions_vars.map_style!==""){var j=JSON.parse(mapfunctions_vars.map_style);F.setOptions({styles:j})}var w=m;var d=q;var H=x;var G=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-title"));var g=jQuery("#googleMap_shortcode").attr("data-pin");var k=1;var u=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-thumb"));var z=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-price"));var h=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var t=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var f="";var A="";var C="";var e="";var E=jQuery("#googleMap_shortcode").attr("data-rooms");var b=jQuery("#googleMap_shortcode").attr("data-bathrooms");var s=jQuery("#googleMap_shortcode").attr("data-size");var p=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-type"));var y=decodeURIComponent(jQuery("#googleMap_shortcode").attr("data-single-first-action"));var n="";var a="";var B=1;createMarker_sh(infoBox_sh,D,F,a,s,B,w,d,H,g,G,k,u,z,h,t,f,A,C,E,b,e,p,y);var l=new google.maps.LatLng(q,x);panorama=F.getStreetView();panorama.setPosition(l);panorama.setPov(({heading:heading,pitch:0}));jQuery("#slider_enable_street_sh").click(function(){cur_lat=jQuery("#googleMap_shortcode").attr("data-cur_lat");cur_long=jQuery("#googleMap_shortcode").attr("data-cur_long");myLatLng=new google.maps.LatLng(cur_lat,cur_long);panorama.setPosition(myLatLng);panorama.setVisible(true);jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").hide()});google.maps.event.addListener(panorama,"closeclick",function(){jQuery("#gmapzoomminus_sh,#gmapzoomplus_sh,#slider_enable_street_sh").show()});if(document.getElementById("gmapzoomplus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomplus_sh"),"click",function(){var i=parseInt(F.getZoom(),10);i++;if(i>20){i=20}F.setZoom(i)})}if(document.getElementById("gmapzoomminus_sh")){google.maps.event.addDomListener(document.getElementById("gmapzoomminus_sh"),"click",function(){var i=parseInt(F.getZoom(),10);i--;if(i<0){i=0}F.setZoom(i)})}google.maps.event.trigger(D[0],"click");google.maps.event.trigger(F,"resize")}function createMarker_sh(h,x,z,a,m,v,p,c,B,g,A,k,o,s,j,n,f,t,w,y,b,e,l,r){var u="";var q=new google.maps.LatLng(c,B);var d=new google.maps.Marker({position:q,map:z,icon:custompin(g),shape:shape,title:A,zIndex:k,image:o,idul:p,price:s,category:j,action:n,link:f,city:t,area:w,infoWindowIndex:v,rooms:y,baths:b,cleanprice:e,size:m,county_state:a,category_name:l,action_name:r});x.push(d);google.maps.event.addListener(d,"click",function(C){if(this.image===""){info_image='<img src="'+mapfunctions_vars.path+'/idxdefault.jpg" alt="image" />'}else{info_image=this.image}var D=decodeURIComponent(this.category.replace(/-/g," "));var G=decodeURIComponent(this.action.replace(/-/g," "));var F=decodeURIComponent(this.category_name.replace(/-/g," "));var H=decodeURIComponent(this.action_name.replace(/-/g," "));var i=mapfunctions_vars.in_text;if(D===""||G===""){i=" "}var E;if(this.baths!=""){E='<span id="infobath">'+this.baths+"</span>"}else{E=""}var I;if(this.rooms!=""){I='<span id="inforoom">'+this.rooms+"</span>"}else{I=""}var J;if(this.size!=""){J='<span id="infosize">'+this.size;if(mapfunctions_vars.measure_sys==="ft"){J=J+" ft<sup>2</sup>"}else{J=J+" m<sup>2</sup>"}J=J+"</span>"}else{J=""}var K=this.title.substr(0,45);if(this.title.length>45){K=K+"..."}h.setContent('<div class="info_details"><span id="infocloser" onClick=\'javascript:infoBox_sh.close();\' ></span><a href="'+this.link+'">'+info_image+'</a><a href="'+this.link+'" id="infobox_title">'+K+'</a><div class="prop_detailsx">'+F+" "+i+" "+H+'</div><div class="prop_pricex">'+this.price+J+E+I+"</div></div>");h.open(z,this);z.setCenter(this.position);switch(infobox_width){case 700:if(mapfunctions_vars.listing_map==="top"){z.panBy(100,-150);console.log("419")}else{if(mapfunctions_vars.small_slider_t==="vertical"){z.panBy(300,-300);console.log("422")}else{z.panBy(10,-110)}}vertical_off=0;break;case 500:z.panBy(50,-120);break;case 400:z.panBy(100,-220);break;case 200:z.panBy(20,-170);break}if(control_vars.show_adv_search_map_close==="no"){$(".search_wrapper").addClass("adv1_close");adv_search_click()}close_adv_search()})}function wpestate_change_map_type(a){if(a==="map-view-roadmap"){map.setMapTypeId(google.maps.MapTypeId.ROADMAP)}else{if(a==="map-view-satellite"){map.setMapTypeId(google.maps.MapTypeId.SATELLITE)}else{if(a==="map-view-hybrid"){map.setMapTypeId(google.maps.MapTypeId.HYBRID)}else{if(a==="map-view-terrain"){map.setMapTypeId(google.maps.MapTypeId.TERRAIN)}}}}}function setMarkers(B,A,n){var b;var x;var l=parseInt(jQuery("#gmap_wrapper").attr("data-post_id"));if(isNaN(l)){l=parseInt(jQuery("#googleMapSlider").attr("data-post_id"),10)}var c=parseInt(mapfunctions_vars.open_height,10);var k=parseInt(mapfunctions_vars.closed_height,10);var o=document.createElement("div");width_browser=jQuery(window).width();infobox_width=700;vertical_pan=-215;if(width_browser<900){infobox_width=500}if(width_browser<600){infobox_width=400}if(width_browser<400){infobox_width=200}var s={content:o,disableAutoPan:true,maxWidth:infobox_width,boxClass:"mybox",zIndex:null,closeBoxMargin:"-13px 0px 0px 0px",closeBoxURL:"",infoBoxClearance:new google.maps.Size(1,1),isHidden:false,pane:"floatPane",enableEventPropagation:true};infoBox=new InfoBox(s);bounds=new google.maps.LatLngBounds();for(var y=0;y<A.length;y++){var u=A[y];var t=u[10];var d=u[1];var D=u[2];var C=decodeURIComponent(u[0]);var g=u[8];var j=u[3];var r=decodeURIComponent(u[4]);var w=decodeURIComponent(u[5]);var h=decodeURIComponent(u[6]);var q=decodeURIComponent(u[7]);var f=decodeURIComponent(u[9]);var e=u[11];var z=u[12];var a=u[13];var p=u[14];var m=decodeURIComponent(u[15]);var v=decodeURIComponent(u[16]);createMarker(p,y,t,d,D,g,C,j,r,w,h,q,f,z,a,e,m,v);if(l===t){found_id=y}}map_cluster();if(!jQuery("body").hasClass("single-estate_property")){oms=new OverlappingMarkerSpiderfier(B,{markersWontMove:true,markersWontHide:true,keepSpiderfied:true,legWeight:3});setOms(gmarkers)}if(n===1){if(!bounds.isEmpty()){wpestate_fit_bounds(bounds)}else{wpestate_fit_bounds_nolsit()}}if(mapfunctions_vars.generated_pins!=="0"){x=new google.maps.LatLng(d,D)}}function createMarker(k,r,n,b,u,f,t,h,m,q,g,l,d,s,a,e,j,p){var o=new google.maps.LatLng(b,u);var c=new google.maps.Marker({position:o,map:map,icon:custompin(f),shape:shape,title:t,zIndex:h,image:m,idul:n,price:q,category:g,action:l,link:d,infoWindowIndex:r,rooms:s,baths:a,cleanprice:e,size:k,category_name:j,action_name:p});gmarkers.push(c);bounds.extend(c.getPosition());google.maps.event.addListener(c,"click",function(v){map_callback(new_open_close_map);google.maps.event.trigger(map,"resize");if(this.image===""){info_image='<img src="'+mapfunctions_vars.path+'/idxdefault.jpg" alt="image" />'}else{info_image=this.image}var w=decodeURIComponent(this.category.replace(/-/g," "));var z=decodeURIComponent(this.action.replace(/-/g," "));var y=decodeURIComponent(this.category_name.replace(/-/g," "));var A=decodeURIComponent(this.action_name.replace(/-/g," "));var i=mapfunctions_vars.in_text;if(w===""||z===""){i=" "}var x;if(this.baths!=""){x='<span id="infobath">'+this.baths+"</span>"}else{x=""}var B;if(this.rooms!=""){B='<span id="inforoom">'+this.rooms+"</span>"}else{B=""}var C;if(this.size!=""){C='<span id="infosize">'+this.size;if(mapfunctions_vars.measure_sys==="ft"){C=C+" ft<sup>2</sup>"}else{C=C+" m<sup>2</sup>"}C=C+"</span>"}else{C=""}var D=this.title.substr(0,45);if(this.title.length>45){D=D+"..."}infoBox.setContent('<div class="info_details"><span id="infocloser" onClick=\'javascript:infoBox.close();\' ></span><a href="'+this.link+'">'+info_image+'</a><a href="'+this.link+'" id="infobox_title">'+D+'</a><div class="prop_detailsx">'+y+" "+i+" "+A+'</div><div class="prop_pricex">'+this.price+C+x+B+"</div></div>");infoBox.open(map,this);map.setCenter(this.position);switch(infobox_width){case 700:if(mapfunctions_vars.listing_map==="top"){map.panBy(100,-150)}else{if(mapfunctions_vars.small_slider_t==="vertical"){map.panBy(300,-300)}else{map.panBy(10,-110)}}vertical_off=0;break;case 500:map.panBy(50,-120);break;case 400:map.panBy(100,-220);break;case 200:map.panBy(20,-170);break}if(control_vars.show_adv_search_map_close==="no"){$(".search_wrapper").addClass("adv1_close");adv_search_click()}close_adv_search()})}function pan_to_last_pin(a){map.setCenter(a)}function setOms(a){for(var b=0;b<a.length;b++){if(typeof oms!=="undefined"){oms.addMarker(a[b])}else{}}}function set_google_search(c){var a,d,b;a=(document.getElementById("google-default-search"));d=new google.maps.places.SearchBox(a);google.maps.event.addListener(d,"places_changed",function(){b=d.getPlaces();if(b.length==0){return}var h=new google.maps.LatLngBounds();for(var g=0,f;f=b[g];g++){var j={url:f.icon,size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)};var e=new google.maps.Marker({map:c,icon:j,title:f.name,position:f.geometry.location});gmarkers.push(e);h.extend(f.geometry.location)}c.fitBounds(h);if(!h.isEmpty()){wpestate_fit_bounds(h)}else{wpestate_fit_bounds_nolsit()}c.setZoom(15)});google.maps.event.addListener(c,"bounds_changed",function(){var e=c.getBounds();d.setBounds(e)})}function wpestate_fit_bounds_nolsit(){map.setZoom(3)}function wpestate_fit_bounds(a){map.fitBounds(a);google.maps.event.addListenerOnce(map,"idle",function(){if(map.getZoom()>15){map.setZoom(15)}})}function new_open_close_map(c){if(jQuery("#gmap_wrapper").hasClass("fullmap")){return}if(mapfunctions_vars.open_close_status!=="1"){var d=jQuery("#googleMap").outerHeight();var f=parseInt(mapfunctions_vars.closed_height,10);var b=parseInt(mapfunctions_vars.open_height,10);var a=b;var e=b;if(infoBox!==null){infoBox.close()}if(d===f){a=b;if(Modernizr.mq("only all and (max-width: 940px)")){e=b}else{jQuery("#gmap-menu").show();e=b}new_show_advanced_search();vertical_off=0;jQuery("#openmap").empty().append('<i class="fa fa-angle-up"></i>'+mapfunctions_vars.close_map)}else{if(c===2){jQuery("#gmap-menu").hide();jQuery("#advanced_search_map_form").hide();a=e=f;new_hide_advanced_search();vertical_off=150}}jQuery("#gmap_wrapper").css("height",e+"px");jQuery("#googleMap").css("height",a+"px");jQuery(".tooltip").fadeOut("fast");setTimeout(function(){google.maps.event.trigger(map,"resize")},300)}}function map_cluster(){if(mapfunctions_vars.user_cluster==="yes"){clusterStyles=[{textColor:"#ffffff",opt_textColor:"#ffffff",url:mapfunctions_vars.path+"/cloud.png",height:72,width:72,textSize:15,}];mcOptions={gridSize:50,ignoreHidden:true,maxZoom:parseInt(mapfunctions_vars.zoom_cluster,10),styles:clusterStyles};mcluster=new MarkerClusterer(map,gmarkers,mcOptions);mcluster.setIgnoreHidden(true)}}if(document.getElementById("gmapzoomplus")){google.maps.event.addDomListener(document.getElementById("gmapzoomplus"),"click",function(){var a=parseInt(map.getZoom(),10);a++;if(a>20){a=20}map.setZoom(a)})}if(document.getElementById("gmapzoomminus")){google.maps.event.addDomListener(document.getElementById("gmapzoomminus"),"click",function(){var a=parseInt(map.getZoom(),10);a--;if(a<0){a=0}map.setZoom(a)})}if(document.getElementById("geolocation-button")){google.maps.event.addDomListener(document.getElementById("geolocation-button"),"click",function(){myposition(map);close_adv_search()})}if(document.getElementById("mobile-geolocation-button")){google.maps.event.addDomListener(document.getElementById("mobile-geolocation-button"),"click",function(){myposition(map);close_adv_search()})}function myposition(b){if(navigator.geolocation){var a;if(location.protocol==="https:"){navigator.geolocation.getCurrentPosition(showMyPosition_original,errorCallback,{timeout:10000})}else{jQuery.getJSON("http://ipinfo.io",function(c){a=c.loc.split(",");showMyPosition(a)})}}else{alert(mapfunctions_vars.geo_no_brow)}}function errorCallback(){alert(mapfunctions_vars.geo_no_pos)}function showMyPosition_original(g){var b={coord:[1,1,1,38,38,59,59,1],type:"poly"};var f=new google.maps.LatLng(g.coords.latitude,g.coords.longitude);map.setCenter(f);var a=new google.maps.Marker({position:f,map:map,icon:custompinchild(),shape:b,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message});var d={strokeColor:"#67cfd8",strokeOpacity:0.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:0.2,map:map,center:f,radius:parseInt(mapfunctions_vars.geolocation_radius,10)};var e=new google.maps.Circle(d);var c=new Label({map:map});c.bindTo("position",a);c.bindTo("text",a,"radius");c.bindTo("visible",a);c.bindTo("clickable",a);c.bindTo("zIndex",a)}var geo_markers=[];var geo_circle=[];var geo_label=[];function showMyPosition(h){for(var e=0;e<geo_markers.length;e++){geo_markers[e].setMap(null);geo_circle[e].setMap(null);geo_label[e].setMap(null)}geo_markers=[];geo_circle=[];geo_label=[];var b={coord:[1,1,1,38,38,59,59,1],type:"poly"};var g=new google.maps.LatLng(h[0],h[1]);map.setCenter(g);map.setZoom(13);var a=new google.maps.Marker({position:g,map:map,icon:custompinchild(),shape:b,title:"",zIndex:999999999,image:"",price:"",category:"",action:"",link:"",infoWindowIndex:99,radius:parseInt(mapfunctions_vars.geolocation_radius,10)+" "+mapfunctions_vars.geo_message});geo_markers.push(a);var d={strokeColor:"#67cfd8",strokeOpacity:0.6,strokeWeight:1,fillColor:"#67cfd8",fillOpacity:0.2,map:map,center:g,radius:parseInt(mapfunctions_vars.geolocation_radius,10)};var f=new google.maps.Circle(d);geo_circle.push(f);var c=new Label({map:map});c.bindTo("position",a);c.bindTo("text",a,"radius");c.bindTo("visible",a);c.bindTo("clickable",a);c.bindTo("zIndex",a);geo_label.push(f)}function custompinchild(){var c;var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}if(typeof(images.userpin)==="undefined"||images.userpin===""){c=mapfunctions_vars.path+"/userpin"+d+".png"}else{c=images.userpin;if(a>1){c=c.replace(".png","_2x.png")}}if(a>1){var b={url:c,size:new google.maps.Size(88,96),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}else{var b={url:c,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,59)}}return b}jQuery("#googleMap").click(function(a){var b;b=a.timeStamp-ipad_time;if(b>300){ipad_time=a.timeStamp;jQuery(".tooltip").fadeOut("fast");if(Modernizr.mq("only all and (max-width: 1025px)")){if(map.draggable===false){map.setOptions({draggable:true})}else{map.setOptions({draggable:false})}}}});if(document.getElementById("gmap")){google.maps.event.addDomListener(document.getElementById("gmap"),"mouseout",function(){google.maps.event.trigger(map,"resize")})}if(document.getElementById("search_map_button")){google.maps.event.addDomListener(document.getElementById("search_map_button"),"click",function(){infoBox.close()})}if(document.getElementById("advanced_search_map_button")){google.maps.event.addDomListener(document.getElementById("advanced_search_map_button"),"click",function(){infoBox.close()})}jQuery("#gmap-next").click(function(){current_place++;if(current_place>gmarkers.length){current_place=1}while(gmarkers[current_place-1].visible===false){current_place++;if(current_place>gmarkers.length){current_place=1}}if(map.getZoom()<15){map.setZoom(15)}google.maps.event.trigger(gmarkers[current_place-1],"click")});jQuery("#gmap-prev").click(function(){current_place--;if(current_place<1){current_place=gmarkers.length}while(gmarkers[current_place-1].visible===false){current_place--;if(current_place>gmarkers.length){current_place=1}}if(map.getZoom()<15){map.setZoom(15)}google.maps.event.trigger(gmarkers[current_place-1],"click")});jQuery(".advanced_action_div li").click(function(){var a=jQuery(this).val()});if(document.getElementById("gmap-menu")){google.maps.event.addDomListener(document.getElementById("gmap-menu"),"click",function(a){infoBox.close();if(a.target.nodeName==="INPUT"){category=a.target.className;if(a.target.name==="filter_action[]"){if(actions.indexOf(category)!==-1){actions.splice(actions.indexOf(category),1)}else{actions.push(category)}}if(a.target.name==="filter_type[]"){if(categories.indexOf(category)!==-1){categories.splice(categories.indexOf(category),1)}else{categories.push(category)}}show(actions,categories)}})}function getCookieMap(d){var b=d+"=";var a=document.cookie.split(";");for(var e=0;e<a.length;e++){var f=a[e];while(f.charAt(0)==" "){f=f.substring(1)}if(f.indexOf(b)==0){return f.substring(b.length,f.length)}}return""}function get_custom_value_tab_search(a){var c="";var b=0;if(a==="adv_categ"||a==="adv_actions"||a==="advanced_city"||a==="advanced_area"||a==="county-state"){c=jQuery(".tab-pane.active #"+a).attr("data-value")}else{if(a==="property_price"&&mapfunctions_vars.slider_price==="yes"){c=jQuery(".tab-pane.active #price_low").val()}else{if(a==="property-country"){c=jQuery(".tab-pane.active #advanced_country").attr("data-value")}else{if(a!==""){if(jQuery(".tab-pane.active #"+a).hasClass("filter_menu_trigger")){c=jQuery(".tab-pane.active #"+a).attr("data-value");b=1}else{c=jQuery(".tab-pane.active #"+a).val()}}}}}return c}function get_custom_value(a){var c;var b=0;if(a==="adv_categ"||a==="adv_actions"||a==="advanced_city"||a==="advanced_area"||a==="county-state"){c=jQuery("#"+a).attr("data-value")}else{if(a==="property_price"&&mapfunctions_vars.slider_price==="yes"){c=jQuery("#price_low").val()}else{if(a==="property-country"){c=jQuery("#advanced_country").attr("data-value")}else{if(jQuery("#"+a).hasClass("filter_menu_trigger")){c=jQuery("#"+a).attr("data-value");b=1}else{c=jQuery("#"+a).val()}}}}if(typeof(c)!=="undefined"&&b===0){}return c}function get_custom_value_onthelist(a){var c;var b=0;if(a==="adv_categ"||a==="adv_actions"||a==="advanced_city"||a==="advanced_area"||a==="county-state"){c=jQuery("#"+a).attr("data-value");if(a==="adv_categ"){c=jQuery("#tax_categ_picked").val()}else{if(a==="adv_actions"){c=jQuery("#tax_action_picked").val()}else{if(a==="advanced_city"){c=jQuery("#tax_city_picked").val()}else{if(a==="advanced_area"){c=jQuery("#taxa_area_picked").val()}}}}}else{if(a==="property_price"&&mapfunctions_vars.slider_price==="yes"){c=jQuery("#price_low").val()}else{if(a==="property-country"){c=jQuery("#advanced_country").attr("data-value")}else{if(jQuery("#"+a).hasClass("filter_menu_trigger")){c=jQuery("#"+a).attr("data-value");b=1}else{c=jQuery("#"+a).val()}}}}return c}function show_pins_onthelist(){return}function show_pins_custom_search_onthelist(){var e,g,d,f,c,a,b;return}function wpestate_show_pins(){var g,b,h,c,f,d,l,k,i,a,e,j,m;if(typeof infoBox!=="undefined"&&infoBox!==null){infoBox.close()}jQuery("#gmap-loading").show();if((mapfunctions_vars.adv_search_type==="8"||mapfunctions_vars.adv_search_type==="9")&&googlecode_regular_vars.is_half_map_list!=="1"){wpestate_show_pins_type2_tabs();return}if(mapfunctions_vars.adv_search_type==="2"&&googlecode_regular_vars.is_half_map_list!=="1"&&googlecode_regular_vars.is_adv_search!=="1"){wpestate_show_pins_type2();return}if(mapfunctions_vars.custom_search==="yes"){wpestate_show_pins_custom_search();return}g=jQuery("#adv_actions").attr("data-value");b=jQuery("#adv_categ").attr("data-value");h=jQuery("#advanced_city").attr("data-value");c=jQuery("#advanced_area").attr("data-value");f=parseFloat(jQuery("#adv_rooms").val(),10);d=parseFloat(jQuery("#adv_bath").val(),10);l=parseFloat(jQuery("#price_low").val(),10);k=parseFloat(jQuery("#price_max").val(),10);a=parseFloat(jQuery("#adv-search-1").attr("data-postid"),10);i=ajaxcalls_vars.admin_url+"admin-ajax.php";if(parseInt(mapfunctions_vars.is_half)===1){if(first_time_wpestate_show_inpage_ajax_half===0){first_time_wpestate_show_inpage_ajax_half=1}else{wpestate_show_inpage_ajax_half()}}j="";jQuery('.extended_search_check_wrapper  input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){j=j+","+jQuery(this).attr("name")}});e=0;m=0;if(jQuery("#google_map_prop_list_sidebar").length){e=1}a=1;if(document.getElementById("search_wrapper")){a=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}jQuery.ajax({type:"POST",url:i,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load",action_values:g,category_values:b,city:h,area:c,advanced_rooms:f,advanced_bath:d,price_low:l,price_max:k,newpage:m,postid:a,halfmap:e,all_checkers:j},success:function(o){var n=parseInt(o.no_results);if(n!==0){wpestate_load_on_demand_pins(o.markers,n,1)}else{wpestate_show_no_results()}jQuery("#gmap-loading").hide()},error:function(n){}})}function wpestate_show_pins_type2(){var b,a,h,g,f,e,d,c;b=jQuery("#adv_actions").attr("data-value");a=jQuery("#adv_categ").attr("data-value");h=jQuery("#adv_location").val();f=parseInt(jQuery("#adv-search-1").attr("data-postid"),10);g=ajaxcalls_vars.admin_url+"admin-ajax.php";e=0;c=0;if(jQuery("#google_map_prop_list_sidebar").length){e=1}f=1;if(document.getElementById("search_wrapper")){f=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}jQuery.ajax({type:"POST",url:g,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load_type2",action_values:b,category_values:a,location:h},success:function(j){var i=parseInt(j.no_results);if(i!==0){wpestate_load_on_demand_pins(j.markers,i,1)}else{wpestate_show_no_results()}jQuery("#gmap-loading").hide()},error:function(i){}})}function wpestate_show_pins_type2_tabs(){var e,c,a,f,b,d,h,i,g;e=jQuery(".tab-pane.active #adv_actions").attr("data-value");if(typeof e==="undefined"){e=""}c=jQuery(".tab-pane.active #adv_categ").attr("data-value");if(typeof c==="undefined"){c=""}a=jQuery(".tab-pane.active #adv_location").val();g=jQuery(".tab-pane.active .picked_tax").val();b=parseInt(jQuery("#adv-search-1").attr("data-postid"),10);f=ajaxcalls_vars.admin_url+"admin-ajax.php";d=0;i=0;if(jQuery("#google_map_prop_list_sidebar").length){d=1}b=1;if(document.getElementById("search_wrapper")){b=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}term_id=jQuery(".tab-pane.active .term_id_class").val();h="";jQuery('.tab-pane.active .extended_search_check_wrapper input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){h=h+","+jQuery(this).attr("name")}});jQuery.ajax({type:"POST",url:f,dataType:"json",data:{action:"wpestate_classic_ondemand_pin_load_type2_tabs",action_values:e,category_values:c,location:a,picked_tax:g,all_checkers:h},success:function(k){var j=parseInt(k.no_results);if(j!==0){wpestate_load_on_demand_pins(k.markers,j,1)}else{wpestate_show_no_results()}jQuery("#gmap-loading").hide()},error:function(j){}})}function wpestate_show_pins_custom_search(){var k,m,p,n,d,l,e,c,h,f,q,b,a,g;k=ajaxcalls_vars.admin_url+"admin-ajax.php";e=0;m=parseInt(mapfunctions_vars.fields_no,10);d=[];n=[];p=[];n=mapfunctions_vars.slugs;p=mapfunctions_vars.hows;if(mapfunctions_vars.slider_price==="yes"){a=jQuery("#price_low").val();g=jQuery("#price_max").val()}if((mapfunctions_vars.adv_search_type==="6"||mapfunctions_vars.adv_search_type==="7")&&!jQuery(".halfsearch")[0]){h=jQuery(".tab-pane.active .term_id_class").val();if(mapfunctions_vars.slider_price==="yes"){a=jQuery("#price_low_"+h).val();g=jQuery("#price_max_"+h).val()}for(var j=0;j<m;j++){if(p[j]=="date bigger"||p[j]=="date smaller"){c=get_custom_value_tab_search(h+n[j])}else{c=get_custom_value_tab_search(n[j])}if(typeof(c)==="undefined"){c=""}d.push(c)}}else{for(var j=0;j<m;j++){c=get_custom_value(n[j]);if(typeof(c)==="undefined"){c=""}d.push(c)}}if((mapfunctions_vars.adv_search_type==="6"||mapfunctions_vars.adv_search_type==="7"||mapfunctions_vars.adv_search_type==="8"||mapfunctions_vars.adv_search_type==="9")){var o=jQuery(".adv_search_tab_item.active").attr("data-tax");if(jQuery(".halfsearch")[0]){o=jQuery(".halfsearch").attr("data-tax")}if(o==="property_category"){n[m]="adv_categ"}else{if(o==="property_action_category"){n[m]="adv_actions"}else{if(o==="property_city"){n[m]="advanced_city"}else{if(o==="property_area"){n[m]="advanced_area"}else{if(o==="property_county_state"){n[m]="county-state"}}}}}p[m]="like";if(jQuery(".halfsearch")[0]){d[m]=jQuery("#"+n[m]).parent().find("input:hidden").val()}else{d[m]=jQuery(".adv_search_tab_item.active").attr("data-term")}}if(parseInt(mapfunctions_vars.is_half)===1){if(first_time_wpestate_show_inpage_ajax_half===0){first_time_wpestate_show_inpage_ajax_half=1}else{wpestate_show_inpage_ajax_half()}}if(parseInt(mapfunctions_vars.is_half)===1){if(first_time_wpestate_show_inpage_ajax_half===0){first_time_wpestate_show_inpage_ajax_half=1}else{wpestate_show_inpage_ajax_half()}}all_checkers="";jQuery('.search_wrapper .extended_search_check_wrapper  input[type="checkbox"]').each(function(){if(jQuery(this).is(":checked")){all_checkers=all_checkers+","+jQuery(this).attr("name")}});f=0;q=0;if(jQuery("#google_map_prop_list_sidebar").length){f=1}b=1;if(document.getElementById("search_wrapper")){b=parseInt(jQuery("#search_wrapper").attr("data-postid"),10)}jQuery.ajax({type:"POST",url:k,dataType:"json",data:{action:"wpestate_custom_ondemand_pin_load",val_holder:d,newpage:q,postid:b,halfmap:f,slider_min:a,slider_max:g,all_checkers:all_checkers},success:function(r){var i=parseInt(r.no_results);if(i!==0){wpestate_load_on_demand_pins(r.markers,i,1)}else{wpestate_show_no_results()}jQuery("#gmap-loading").hide()},error:function(i){}})}function wpestate_empty_map(){for(var a=0;a<gmarkers.length;a++){gmarkers[a].setVisible(false);gmarkers[a].setMap(null)}gmarkers=[];if(typeof(mcluster)!=="undefined"){mcluster.clearMarkers()}}function wpestate_load_on_demand_pins(c,a,b){jQuery("#gmap-noresult").hide();if(b===1){jQuery("#results_no").show().empty().append(a);jQuery("#results, #showinpage,#showinpage_mobile").show()}wpestate_empty_map();setMarkers(map,c);if(!bounds.isEmpty()){wpestate_fit_bounds(bounds)}else{wpestate_fit_bounds_nolsit()}}function wpestate_show_no_results(){jQuery("#results").hide();jQuery("#gmap-noresult").show();if(document.getElementById("google_map_prop_list_wrapper")){jQuery("#listing_ajax_container").empty().append('<p class=" no_results_title ">'+mapfunctions_vars.half_no_results+"</p>")}}function wpestate_show_inpage_ajax_tip2(){if(jQuery("#gmap-full").hasClass("spanselected")){jQuery("#gmap-full").trigger("click")}if(mapfunctions_vars.custom_search==="yes"){custom_search_start_filtering_ajax(1)}else{start_filtering_ajax(1)}}function wpestate_show_inpage_ajax_half(){jQuery(".half-pagination").remove();if(mapfunctions_vars.custom_search==="yes"){custom_search_start_filtering_ajax(1)}else{start_filtering_ajax(1)}}function enable_half_map_pin_action(){jQuery("#google_map_prop_list_sidebar .listing_wrapper").hover(function(){var a=jQuery(this).attr("data-listid");wpestate_hover_action_pin(a)},function(){var a=jQuery(this).attr("data-listid");wpestate_return_hover_action_pin(a)})}function convertToSlug(a){return a.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}function custompin(b){var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}var c;if(b!==""){if(typeof(images[b])==="undefined"||images[b]===""){c=mapfunctions_vars.path+"/"+b+d+".png"}else{c=images[b];if(a>1){c=c.replace(".png","_2x.png")}}}else{c=mapfunctions_vars.path+"/none.png"}if(typeof(c)==="undefined"){c=mapfunctions_vars.path+"/none.png"}if(a>1){b={url:c,size:new google.maps.Size(118,118),scaledSize:new google.maps.Size(44,48),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49),optimized:false}}else{b={url:c,size:new google.maps.Size(59,59),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,49)}}return b}function Label(b){this.setValues(b);var a=this.span_=document.createElement("span");a.style.cssText="position: relative; left: -50%; top: 8px; white-space: nowrap;  padding: 2px; background-color: white;opacity:0.7";var c=this.div_=document.createElement("div");c.appendChild(a);c.style.cssText="position: absolute; display: none"}Label.prototype=new google.maps.OverlayView;Label.prototype.onAdd=function(){var b=this.getPanes().overlayImage;b.appendChild(this.div_);var a=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){a.draw()}),google.maps.event.addListener(this,"visible_changed",function(){a.draw()}),google.maps.event.addListener(this,"clickable_changed",function(){a.draw()}),google.maps.event.addListener(this,"text_changed",function(){a.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){a.draw()}),google.maps.event.addDomListener(this.div_,"click",function(){if(a.get("clickable")){google.maps.event.trigger(a,"click")}})]};Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var b=0,a=this.listeners_.length;b<a;++b){google.maps.event.removeListener(this.listeners_[b])}};Label.prototype.draw=function(){var c=this.getProjection();var b=c.fromLatLngToDivPixel(this.get("position"));var f=this.div_;f.style.left=b.x+"px";f.style.top=b.y+"px";var d=this.get("visible");f.style.display=d?"block":"none";var a=this.get("clickable");this.span_.style.cursor=a?"pointer":"";var e=this.get("zIndex");f.style.zIndex=e;this.span_.innerHTML=this.get("text").toString()};function close_adv_search(){}function new_show_advanced_search(){jQuery("#search_wrapper").removeClass("hidden")}function new_hide_advanced_search(){if(mapfunctions_vars.show_adv_search==="no"){jQuery("#search_wrapper").addClass("hidden")}}function wpestate_hover_action_pin(a){for(var b=0;b<gmarkers.length;b++){if(parseInt(gmarkers[b].idul,10)===parseInt(a,10)){pin_hover_storage=gmarkers[b].icon;gmarkers[b].setIcon(custompinhover())}}}function wpestate_return_hover_action_pin(a){for(var b=0;b<gmarkers.length;b++){if(parseInt(gmarkers[b].idul,10)===parseInt(a,10)){gmarkers[b].setIcon(pin_hover_storage)}}}function custompinhover(){var c,b;var d="";var a=jQuery(window).dense("devicePixelRatio");if(a>1){d="_2x"}c=mapfunctions_vars.path+"/hover"+d+".png";if(a>1){b={url:c,size:new google.maps.Size(132,144),scaledSize:new google.maps.Size(66,72),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}}else{b={url:c,size:new google.maps.Size(90,90),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(25,72)}}return b}function map_callback(a){a(1)};