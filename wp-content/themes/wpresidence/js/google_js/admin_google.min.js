
var map="";var selected_city="";var geocoder;var gmarkers=[];function initialize(){geocoder=new google.maps.Geocoder();var c=new google.maps.LatLng(admin_google_vars.general_latitude,admin_google_vars.general_longitude);var b={flat:false,noClear:false,zoom:17,scrollwheel:false,draggable:true,center:c,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("googleMap"),b);google.maps.visualRefresh=true;var a=new google.maps.Marker({position:c});a.setMap(map);gmarkers.push(a);google.maps.event.addListener(map,"click",function(d){placeMarker(d.latLng);google.maps.visualRefresh=true});google.maps.event.addDomListener(document.getElementById("property_map_trigger"),"click",function(){console.log("resize");google.maps.event.trigger(map,"resize");map.setCenter(c)})}function placeMarker(b){removeMarkersadmin();var a=new google.maps.Marker({position:b,map:map});gmarkers.push(a);var c=new google.maps.InfoWindow({content:"Latitude: "+b.lat()+"<br>Longitude: "+b.lng()});c.open(map,a);document.getElementById("property_latitude").value=b.lat();document.getElementById("property_longitude").value=b.lng()}function removeMarkersadmin(){for(i=0;i<gmarkers.length;i++){gmarkers[i].setMap(null)}}google.maps.event.addDomListener(window,"load",initialize);jQuery("#admin_place_pin").click(function(a){a.preventDefault();admin_codeAddress()});jQuery("#property_citychecklist label").click(function(a){selected_city=jQuery(this).text()});function admin_codeAddress(){var d,f;var a=document.getElementById("property_address").value;var c=a;var b=jQuery("#property_city-all input:checked").parent();f=b.text();if(f){var c=c+","+f}b=jQuery("#property_county_state-all input:checked").parent();d=b.text();if(d){var c=c+","+d}var e=document.getElementById("property_country").value;if(e){var c=c+","+e}geocoder.geocode({address:c},function(j,h){if(h==google.maps.GeocoderStatus.OK){map.setCenter(j[0].geometry.location);removeMarkersadmin();var g=new google.maps.Marker({map:map,position:j[0].geometry.location});gmarkers.push(g);var k=new google.maps.InfoWindow({content:"Latitude: "+j[0].geometry.location.lat()+"<br>Longitude: "+j[0].geometry.location.lng()});k.open(map,g);document.getElementById("property_latitude").value=j[0].geometry.location.lat();document.getElementById("property_longitude").value=j[0].geometry.location.lng()}else{alert(admin_google_vars.geo_fails+h)}})};